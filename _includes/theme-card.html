{% assign repo_path = include.theme.repo | default: "" %}
{% assign owner = repo_path | split: "/" | first %}
{% assign repo_name = repo_path | split: "/" | last %}
{% assign demo_url = "https://" | append: owner | append: ".github.io/" | append: repo_name | append: "/" %}
{% assign download_url = "https://github.com/" | append: repo_path %}
{% assign preview_image = include.theme.image | default: include.theme.preview_image | default: "https://opengraph.githubassets.com/1/" | append: repo_path %}

<div class="theme-card" data-category="{{ include.theme.category }}">
    <div class="theme-card-image">
        {% assign is_absolute = preview_image | slice: 0,4 %}
        <img src="{% if is_absolute == 'http' %}{{ preview_image }}{% else %}{{ preview_image | relative_url }}{% endif %}" alt="{{ include.theme.name }} preview" loading="lazy">
        <div class="theme-card-overlay">
            <div class="theme-card-actions">
                <a href="{{ demo_url }}" class="btn btn-primary" target="_blank" rel="noopener">
                    <span>Demo</span>
                </a>
                <a href="{{ download_url }}" class="btn btn-secondary" target="_blank" rel="noopener">
                    <span>Download</span>
                </a>
            </div>
        </div>
    </div>

    <div class="theme-card-content">
        <div class="theme-card-header">
            <h3 class="theme-card-title">{{ include.theme.name }}</h3>
            <div class="theme-card-badges">
                <span class="theme-card-category">{{ include.theme.category }}</span>
            </div>
        </div>

        <p class="theme-card-description">
            {{ include.theme.description | default: "Official GitHub Pages theme maintained at " | append: repo_path }}
        </p>

        <div class="theme-card-meta">
            <span class="theme-card-author">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 8a3 3 0 100-6 3 3 0 000 6zm0 1c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                </svg>
                {{ owner }}
            </span>
        </div>

        {% if include.theme.features %}
        <ul class="theme-card-features">
            {% for feature in include.theme.features limit:3 %}
            <li>{{ feature }}</li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
</div>
